!function(){function e(e){if(this.multiselect=e.multiselect||!1,this.showAvatar=e.showAvatar||!1,this.itemHeight=e.itemHeight||20,this.itemsBuffer=e.itemsBuffer||10,this.pictureUrl=e.pictureUrl||"",!e.element)throw"Error initializing dropdown. Property 'element' must contain target element reference.";t(e.element),e.items&&this.update(e.items)}e.prototype.update=function(e){this.items=e,this.runFilter(),this.render()},e.prototype.render=function(){this.renderButton(),this.renderMenu()},e.prototype.runFilter=function(){this.filteredItems=this.items},e.prototype.renderButton=function(){},e.prototype.renderMenu=function(){var e=this.filteredItems.length*this.itemHeight,t=this.elements.menu.querySelector(".dd-items-container"),i=this.elements.menu.scrollTop,n=this.elements.menu.offsetHeight,s=i/this.itemHeight,r=i/this.itemHeight+n/this.itemHeight;t.style.height=e+"px",s=Math.max(0,s-this.itemsBuffer),r=Math.min(this.filteredItems.length-1,r+this.itemsBuffer);for(var o=document.createDocumentFragment(),d=s;d<=r;d++){var m=this.itemElementFabric(this.filteredItems[d],this.showAvatar,this.pictureUrl);m.style.top=d*this.itemHeight+"px",m.style.position="absolute",o.appendChild(m)}t.innerHTML="",t.appendChild(o)},e.prototype.itemElementFabric=function(e,t,i){var n='<div class="dd-menu-item">'+(t?'<img class="dd-item-picture" src="$AVATAR"':"")+'<span class="dd-item-name">$NAME</span><span class="dd-item-info">$INFO</span></div>';t&&(i||console.error("Error while creating row. Param 'withPicture' was provided. Param 'PictureURL' must be provided in this case."),n=n.replace("$AVATAR",i+(e.avatar||"placeholder"))),n=(n=n.replace("$NAME",e.name+" "+e.surname)).replace("$SURNAME",e.info);var s=document.createElement("div");return s.outerHTML=n,s};var t=function(e){this.elements={},this.elements.button=i('<div class="dd-toggle"><div class="dd-tokens"></div><button class="dd-token-add"></button><input type="text" class="dd-input" /></div>'),this.elements.menu=i('<div class="dd-menu"><div class="dd-items-container"></div></div>'),e.appendChild(this.elements.buttons),e.appendChild(this.elements.menu)},i=function(e){var t=document.createElement("div");return t.outerHTML=e||"",t};window.VKDropdown=e}();